import{r as o,j as e,a as S}from"./index-BvZ950ky.js";import{p as N}from"./purify.es-BlFzGd2J.js";import{e as M,a as q}from"./password-visibility-icon-reverse-7o_rWNZ4.js";import K from"./privacyPolicy-wNA_vOCK.js";import H from"./termsOfService-DQKPrq7L.js";import{G as Y}from"./googleSignup-DkCrUycN.js";/* empty css                */const W=({isVisible:s,content:r,onClose:i,requireScroll:n})=>{const[x,y]=o.useState(!n),f=l=>{const{scrollTop:m,scrollHeight:b,clientHeight:v}=l.target;console.log({scrollTop:m,scrollHeight:b,clientHeight:v}),m+v>=b&&y(!0)};return s?e.jsx("div",{style:J,children:e.jsxs("div",{style:Q,children:[e.jsx("div",{onScroll:f,style:X(n),children:r}),n&&e.jsxs("div",{children:[!x&&e.jsx("p",{style:ee,children:"Please scroll to the bottom to enable the Close button."}),x&&e.jsx("button",{onClick:i,style:T,children:"Close"})]}),e.jsx("div",{style:{backgroundColor:"black"},children:!n&&e.jsx("button",{onClick:i,style:T,children:"Close"})})]})}):null},Z=()=>{const[s,r]=o.useState({userName:"",email:"",password:"",confirmPassword:"",phoneNumber:"",countryCode:"+1",isOptedInForPromotions:!1,isOptedInForEmailUpdates:!1,hasAcceptedTermsOfService:!1,hasAcceptedPrivacyPolicy:!1});o.useState(!1),o.useState(!1);const[i,n]=o.useState(""),[x,y]=o.useState(!1),[f,l]=o.useState(""),[m,b]=o.useState(!1),[v,A]=o.useState(!1),[C,j]=o.useState(""),[F,_]=o.useState(""),[w,U]=o.useState(!1),[d,R]=o.useState({length:!1,upperLowerCase:!1,specialChar:!1,digit:!1}),k=()=>s.hasAcceptedPrivacyPolicy&&s.hasAcceptedTermsOfService;k(),k();const O=()=>{U(!w),b(!m)},z=a=>{const t=a.replace(/[^\d]/g,"");return t.length<4?t:t.length<7?`(${t.slice(0,3)}) ${t.slice(3)}`:`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6,10)}`},u=a=>{const{name:t,value:p,type:c,checked:P}=a.target;r({...s,[t]:c==="checkbox"?P:p})},D=a=>{const t=z(a.target.value);r({...s,phoneNumber:t})},I=a=>{n(a),y(!0)},L=()=>{y(!1)};o.useEffect(()=>{const a=s.password.length>=8,t=/(?=.*[a-z])(?=.*[A-Z])/.test(s.password),p=/(?=.*[@$!%*?&-])/.test(s.password),c=/(?=.*\d)/.test(s.password);R({length:a,upperLowerCase:t,specialChar:p,digit:c})},[s.password]);const G=async a=>{if(a.preventDefault(),console.log("Form data before submission:",s),s.password!==s.confirmPassword){l("Passwords do not match");return}if(!(d.length&&d.upperLowerCase&&d.specialChar&&d.digit)){l("Password must be at least 8 characters long, contain one uppercase letter, one lowercase letter, one number, and one special character (including dash '-').");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)){l("Please enter a valid email address");return}try{const c=N.sanitize(s.userName),P=N.sanitize(s.email),B=N.sanitize(s.phoneNumber),E=await S.post("/sign-up",{userName:c,email:P,password:s.password,phoneNumber:`${s.countryCode} ${B}`,isOptedInForPromotions:s.isOptedInForPromotions,isOptedInForEmailUpdates:s.isOptedInForEmailUpdates,hasAcceptedPrivacyPolicy:s.hasAcceptedPrivacyPolicy,hasAcceptedTermsOfService:s.hasAcceptedTermsOfService,actionType:"sign-up"});E.status===200?(_(s.email),A(!0),$()):l(E.data.message||"Error during registration.")}catch(c){console.error("There was an error signing up!",c),c.response?l(c.response.data.message||"Error signing up"):l("Error signing up")}},V=async()=>{try{const a=await S.post("/sign-up/check-username",{userName:s.userName});j("")}catch(a){a.response&&a.response.status===400?j("Username is already taken"):j("Error checking username")}},h=(a,t)=>{if(a.key==="Enter"){a.preventDefault();const p=document.querySelector(`[data-index="${t+1}"]`);p&&p.focus()}},$=()=>{r({userName:"",email:"",password:"",confirmPassword:"",phoneNumber:"",countryCode:"+1",isOptedInForPromotions:!1,isOptedInForEmailUpdates:!1})};return e.jsx("div",{children:v?e.jsxs("div",{className:"success-message",style:{color:"black"},children:["Registration successful! A verification email has been sent to your inbox:",e.jsx("div",{className:"user-email",children:F}),"Please check your inbox to verify your account.",e.jsx("p",{style:{backgroundColor:"black",color:"white",padding:"10px",borderRadius:"10px"},children:"If this email is incorrect please sign up again"})]}):e.jsx("div",{className:"center-container",children:e.jsxs("form",{onSubmit:G,children:[f&&e.jsx("div",{className:"error-message",style:{padding:"20%"},children:f}),e.jsx("div",{id:"g_id_onload","data-client_id":"YOUR_GOOGLE_CLIENT_ID","data-login_uri":"https://your.domain/your_login_endpoint","data-your_own_param_1_to_login":"any_value","data-your_own_param_2_to_login":"any_value"}),e.jsx("input",{type:"text",name:"userName",value:s.userName,onChange:u,onBlur:V,placeholder:"Username",required:!0,style:g,"data-index":"0",onKeyDown:a=>h(a,0)}),C&&e.jsx("div",{className:"error-message",style:{marginLeft:"20%",padding:"10px",margin:"10px",backgroundColor:"#ffffffd1",borderRadius:"10px"},children:C}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:u,placeholder:"Email",required:!0,style:g,"data-index":"1",onKeyDown:a=>h(a,1)}),e.jsxs("div",{className:"phone-input-wrapper",style:g,children:[e.jsxs("select",{name:"countryCode",value:s.countryCode,onChange:u,className:"country-code",children:[e.jsx("option",{value:"+1",children:"+1 (US)"}),e.jsx("option",{value:"+44",children:"+44 (UK)"}),e.jsx("option",{value:"+61",children:"+61 (Australia)"})]}),e.jsx("input",{type:"tel",name:"phoneNumber",value:s.phoneNumber,onChange:D,placeholder:"Phone Number",maxLength:14,required:!0,"data-index":"2",onKeyDown:a=>h(a,2)})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:w?"text":"password",name:"password",value:s.password,onChange:a=>r({...s,password:a.target.value}),placeholder:"Password",required:!0,style:g,"data-index":"3",onKeyDown:a=>h(a,3)}),e.jsx("img",{src:m?M:q,alt:"Toggle Password Visibility",onClick:O,style:{position:"absolute",top:"50%",right:"20vw",transform:"translateY(-70%)",width:"24px",height:"24px",cursor:"pointer"}}),e.jsx("button",{type:"button",onClick:O,style:{position:"absolute",right:"10px",background:"none",border:"none",cursor:"pointer"}})]}),e.jsxs("ul",{children:[e.jsx("li",{className:d.length?"valid":"invalid",children:"Password must be at least 8 characters long"}),e.jsx("li",{className:d.upperLowerCase?"valid":"invalid",children:"Requires at least one uppercase letter & one lowercase letter"}),e.jsx("li",{className:d.specialChar?"valid":"invalid",children:"Requires at least one special character (including '-')"}),e.jsx("li",{className:d.digit?"valid":"invalid",children:"Requires at least one digit"})]}),e.jsx("input",{type:w?"text":"password",name:"confirmPassword",value:s.confirmPassword,onChange:a=>r({...s,confirmPassword:a.target.value}),placeholder:"Confirm Password",required:!0,style:g,"data-index":"4",onKeyDown:a=>h(a,4)}),e.jsx("div",{className:"accept-toggle-wrapper",children:e.jsxs("div",{className:"check-boxes",children:[e.jsx("input",{type:"checkbox",name:"isOptedInForPromotions",checked:s.isOptedInForPromotions,onChange:u,id:"optInPromotions"}),e.jsx("label",{htmlFor:"optInPromotions",className:"opt-in-description",children:e.jsx("p",{className:"signup-form-paragraph",children:"Opt-in for Promotions"})})]})}),e.jsx("div",{className:"accept-toggle-wrapper",children:e.jsxs("div",{className:"check-boxes",children:[e.jsx("input",{type:"checkbox",name:"isOptedInForEmailUpdates",checked:s.isOptedInForEmailUpdates,onChange:u,id:"optInEmailUpdates"}),e.jsx("label",{htmlFor:"optInEmailUpdates",className:"opt-in-description",children:e.jsx("p",{className:"signup-form-paragraph",children:"Opt-in for Email Updates (This includes tracking updates)"})})]})}),e.jsx(W,{isVisible:x,content:i,onClose:L}),e.jsx("div",{className:"accept-toggle-wrapper",children:e.jsxs("div",{className:"check-boxes",children:[e.jsx("input",{type:"checkbox",name:"hasAcceptedPrivacyPolicy",checked:s.hasAcceptedPrivacyPolicy,onChange:a=>r({...s,hasAcceptedPrivacyPolicy:a.target.checked}),id:"acceptPrivacyPolicy",className:"toggle-input"}),e.jsxs("label",{htmlFor:"acceptPrivacyPolicy",className:"toggle-label",children:[e.jsx("p",{className:"signup-form-paragraph",children:"I have read and agree to the"}),e.jsx("div",{onClick:()=>I(e.jsx(K,{})),className:"p-t-link",children:"Privacy Policy"})]})]})}),e.jsx("div",{className:"accept-toggle-wrapper",children:e.jsxs("div",{className:"check-boxes",children:[e.jsx("input",{type:"checkbox",name:"hasAcceptedTermsOfService",checked:s.hasAcceptedTermsOfService,onChange:a=>r({...s,hasAcceptedTermsOfService:a.target.checked}),id:"acceptTermsOfService",className:"toggle-input"}),e.jsxs("label",{htmlFor:"acceptTermsOfService",className:"toggle-label",children:[e.jsx("p",{className:"signup-form-paragraph",children:"I have read and agree to the"}),e.jsx("div",{onClick:()=>I(e.jsx(H,{})),className:"p-t-link",children:"Terms of Service"})]})]})}),e.jsx("button",{type:"submit",disabled:!s.hasAcceptedPrivacyPolicy||!s.hasAcceptedTermsOfService,className:"signup-button",children:s.hasAcceptedPrivacyPolicy&&s.hasAcceptedTermsOfService?"Sign Up":"Accept Terms and Conditions"})]})})})},J={position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},Q={backgroundColor:"white",padding:"2rem",borderRadius:"1rem",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",maxWidth:"600px",width:"120%",position:"relative"},T={position:"absolute",bottom:"10%",right:"10%",padding:"0.5rem",fontSize:"1rem",backgroundColor:"#007BFF",color:"white",border:"none",borderRadius:"0.25rem",cursor:"pointer",disabled:{backgroundColor:"grey",cursor:"not-allowed"}},X=s=>({maxHeight:s?"300px":"auto",overflowY:s?"scroll":"visible",padding:"1rem",marginBottom:"2rem",border:"1px solid #ddd",borderRadius:"0.25rem",fontSize:"1rem",lineHeight:"1.5"}),ee={fontSize:"0.9rem",color:"#888",textAlign:"center"},g={height:"50px",maxWidth:"300px",width:"80%",padding:"5px",marginLeft:"10%",marginBottom:"20px",boxSizing:"border-box"},ce=()=>{console.log("VITE_GOOGLE_CLIENT_ID:","897147424144-ejj7pjpkbc66k7occksnjvg6ismgpg11.apps.googleusercontent.com");const s=async i=>{console.log("Google Sign-In successful! Token:",i);try{const n=await S.post("/google",{idToken:i});n.data.success&&(console.log("User authenticated successfully:",n.data),window.location.href="https://user.bakersburns.com")}catch(n){console.error("Error authenticating user:",n)}},r=i=>{console.error("Google Sign-In failed:",i)};return e.jsx("div",{className:"form-section",children:e.jsxs("div",{children:[e.jsx(Y,{onSuccess:s,onFailure:r}),e.jsx(Z,{})]})})};export{ce as default};
