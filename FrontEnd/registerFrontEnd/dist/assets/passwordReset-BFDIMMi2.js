import{r as t,u as S,b as v,j as s,a as y}from"./index-BvZ950ky.js";const R=()=>{const[i,m]=t.useState(""),[c,w]=t.useState(""),[d,r]=t.useState(""),[l,u]=t.useState(!1),[p,h]=t.useState(""),[f,P]=t.useState(""),x=S(),g=v();t.useEffect(()=>{const e=new URLSearchParams(g.search),o=e.get("email"),a=e.get("token");console.log("Email:",o),console.log("Token:",a),o&&a?(h(o),P(a)):r("Invalid or missing email/token.")},[g.search]);const b=async e=>{var o,a;if(e.preventDefault(),i!==c){r("Passwords do not match");return}if(i.length<8){r("Password must be at least 8 characters long");return}try{u(!0);const n=await y.post("/account-settings/reset-password",{email:p,token:f,password:i});console.log("Backend Response:",n),n.status===200?(r("Password reset successfully! Redirecting to login..."),setTimeout(()=>x("/login"),2e3)):(console.error("Non-200 status:",n),r("Error resetting password"))}catch(n){console.error("Error:",n.response);const j=((a=(o=n.response)==null?void 0:o.data)==null?void 0:a.message)||"Error resetting password";r(j)}finally{u(!1)}};return s.jsxs("div",{children:[s.jsx("h2",{children:"Reset Password"}),s.jsxs("form",{onSubmit:b,children:[s.jsxs("label",{children:["New Password:",s.jsx("input",{type:"password",value:i,onChange:e=>m(e.target.value),required:!0,disabled:l})]}),s.jsxs("label",{children:["Confirm New Password:",s.jsx("input",{type:"password",value:c,onChange:e=>w(e.target.value),required:!0,disabled:l})]}),s.jsx("button",{type:"submit",disabled:l,children:l?"Resetting...":"Reset Password"})]}),d&&s.jsx("p",{children:d})]})};export{R as default};
